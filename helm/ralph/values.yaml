image:
  repository: gcr.io/replikanti/ralph
  tag: "0.1.0"
redis:
  # For local development or non-persistent internal redis
  url: "redis://ralph-redis-master:6379"
  # For GCP Memorystore or other managed Redis (OVERRIDES url above)
  # Create a secret named 'ralph-redis-secret' with key 'redis-url' containing the full connection string
  # existingSecret: "ralph-redis-secret"
  # existingSecretKey: "redis-url"

secrets:
  # Map these to your existing K8s secrets
  githubToken: "ralph-github-token"
  anthropicKey: "ralph-anthropic-key"
  langfuse: "ralph-langfuse"
  linearWebhook: "ralph-linear-secret"
# Map Linear Teams to GitHub Repositories
# Key: Linear Team Key (e.g., "FRONT")
# Value: GitHub Repository URL
teamRepos:
  RAL: "https://github.com/Replikanti/ralph-platform"
  # FRONT: "https://github.com/org/frontend.git"
  # BACK: "https://github.com/org/backend.git"

resources:
  api:
    requests:
      cpu: "100m"
      memory: "256Mi"
      storage: "100Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"
      storage: "500Mi"
  worker:
    requests:
      cpu: "250m"
      memory: "512Mi"
      storage: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"
      storage: "10Gi"

ingress:
  enabled: true
  className: "gce"
  annotations:
    kubernetes.io/ingress.global-static-ip-name: "ralph-static-ip"
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: "" # Empty host accepts IP address access (for now)
      paths:
        - path: /*
          pathType: ImplementationSpecific

service:
  type: NodePort
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

scaling:
  workerReplicas: 1

# External Secrets Operator configuration
externalSecrets:
  enabled: true
  # GCP project ID where secrets are stored
  gcpProjectID: "langfuse-platform"
  # GKE cluster location and name for Workload Identity
  clusterLocation: "europe-west1-b"
  clusterName: "ralph-cluster"
  # Kubernetes service account that ESO uses (must match ESO installation)
  serviceAccountName: "external-secrets"
